{% extends 'layout.html' %}

{% from 'includes/_formhelpers.html' import render_field %}

{% block body %}
<div class="jumbotron">
  <div class="container">
    <h1 class="display-5 text-center">Add Incident</h1>
    <form method='POST'>
    {{ form.hidden_tag() }}
        <div class="form-group row">
           <div class="col-md-4">
                {{ render_field(form.incident, class_="form-control" ) }}
            </div>
            <div class="col-md-8">
                {{ render_field(form.url, class_="form-control" ) }}
            </div>
        </div>
        <div class="form-group">
            {{ render_field(form.description, class_="form-control" ) }}
        </div>

        <button type="submit" class="btn btn-primary btn-md">Add</button>
    </form>
  </div>
</div>

{% endblock %}
      
      <hr>

{% block content %}   
      {% if incidents.count() == 0 %}
          <h3>No incidents yet</h3>
      {% else %}
          {% for incident in incidents %}

        <div class="card card-outline-secondary mb-2">
          <div class="card-header">
              <h5><a href="{{ incident.url }}" target='_blank'>{{ incident.incident }}</a></h5>
          </div>
          <div class="card-block">
            <p class="card-text mb-4">{{ incident.description  }}</p>
              <p class="text-right"><small> {{ incident.created_date }} </small></p>
            <a href="{{ url_for('view_incident', id=incident.id) }}" class="btn btn-info">View</a>
            <a href="#" class="btn btn-warning">Edit</a>
            <a href="#" class="btn btn-danger">Delete</a>
          </div>
        </div>

          {% endfor %}
      {% endif %}

{% endblock %}